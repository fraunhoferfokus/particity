YUI.add("aui-char-counter",function(e,t){var n=e.Lang,r=n.isNumber,i="char-counter",s="counter",o="input",u="maxLength",a="scrollLeft",f="scrollTop",l=e.Component.create({NAME:i,ATTRS:{counter:{setter:e.one},input:{setter:e.one},maxLength:{lazyAdd:!1,setter:function(e){return this._setMaxLength(e)},validator:r,value:Infinity}},EXTENDS:e.Base,prototype:{handler:null,initializer:function(){var e=this;e.bindUI(),e.checkLength()},bindUI:function(){var t=this,n=t.get(o);t.publish("maxLength"),t.after("maxLengthChange",t.checkLength),n&&(t.handler=n.on(o,e.bind(t._onInputChange,t)))},syncUI:function(){var e=this,t=e.get(s);if(t){var n=e.get(o).val(),r=e.get(u)-e._getNormalizedLength(n);t.html(r)}},destroy:function(){var e=this;e.handler&&e.handler.detach()},checkLength:function(){var e=this,t=e.get(o);if(!t)return!1;var n=e.get(u),r=t.val(),i=e._getNormalizedLength(r);if(i>n){var s=t.get("scrollTop"),l=t.get("scrollLeft"),c=n-(i-r.length);r=r.substring(0,c),t.val(r),t.set(f,s),t.set(a,l)}e.syncUI(),i>=n&&e.fire("maxLength")},_getNormalizedLength:function(e){var t=e.match(/(\r\n|\n|\r)/g),n=0;return t!==null&&(n=t.length),e.length+n},_onInputChange:function(e){var t=this;t.checkLength()},_setMaxLength:function(e){var t=this,n=t.get(o);return n&&e<Infinity&&n.set(u,e),e}}});e.CharCounter=l},"2.0.0",{requires:["aui-node","aui-event-input","aui-component"]});
