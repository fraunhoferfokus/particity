YUI.add("aui-form-builder-field-base",function(e,t){var n=e.Lang,r=n.isArray,i=n.isObject,s=e.Array,o=e.Escape,u="acceptChildren",a="alert",f="allowRemoveRequiredFields",l="asterisk",c="bodyContent",h="boolean",p="boundingBox",d="builder",v="children",m="clearfix",g="component",y="contentBox",b="controlsToolbar",w="deleteFieldsMessage",E="disabled",S=".",x="drop",T="dropZoneNode",N="",C="field",k="fields",L="form",A="form-builder-field",O="hiddenAttributes",M="icon",_="id",D="info",P="label",H="labelNode",t="name",B="no",j="parent",F="plus",I="predefinedValue",q="question",R="readOnly",U="readOnlyAttributes",z="required",W="requiredFlagNode",X="selected",V="showLabel",$="sign",J=" ",K="string",Q="templateNode",G="tip",Y="tipFlagNode",Z="trash",et="type",tt="unique",nt="widget",rt="wrench",it="yes",st="zone",ot="_",ut=e.getClassName,at=ut(m),ft=ut(g),lt=ut(L,d,x,st),ct=ut(L,d,C),ht=ut(L,d,C,X),pt=ut(L,d,tt),dt=ut(M),vt=ut(M,l),mt=ut(M,F),gt=ut(M,q,$),yt=ut(M,Z),bt=ut(M,rt),wt=ut(nt),Et='<div class="'+[wt,ft,ct].join(J)+'"></div>',St='<div class="'+lt+'"></div>',xt='<span class="'+[dt,vt].join(J)+'"></span>',Tt='<span class="'+[dt,gt].join(J)+'"></span>',Nt='<label for="{id}">{label}</label>',Ct=[_,t],kt=e.Component.create({NAME:A,AUGMENTS:[e.FieldSupport]}),Lt=e.Component.create({NAME:A,ATTRS:{acceptChildren:{value:!0},builder:{value:null},controlsToolbar:{validator:i,valueFn:function(){var e=this;return{children:e._getToolbarItems(e.get(z),e.get(tt)),visible:!1}}},dataType:{value:K},disabled:{value:!1},selected:{value:!1},hiddenAttributes:{validator:r,value:[]},id:{setter:"_setId"},label:{value:N},localizationMap:{value:{}},name:{valueFn:function(){var t=this,n=t.get(et);return e.FormBuilderField.buildFieldName(n)}},parent:{value:null},predefinedValue:{value:N},readOnly:{setter:e.DataType.Boolean.parse,value:!1},readOnlyAttributes:{validator:r,value:[]},required:{setter:e.DataType.Boolean.parse,value:!1},showLabel:{setter:e.DataType.Boolean.parse,value:!0},strings:{value:{button:"Button",buttonType:"Button Type",deleteFieldsMessage:"Are you sure you want to delete the selected field(s)?",duplicateMessage:"Duplicate",editMessage:"Edit",label:"Label",large:"Large",medium:"Medium",multiple:"Multiple",name:"Name",no:"No",options:"Options",predefinedValue:"Predefined Value",readOnly:"Read Only",required:"Required",reset:"Reset",showLabel:"Show Label",small:"Small",submit:"Submit",tip:"Tip",type:"Type",width:"Width",yes:"Yes"}},tabIndex:{value:0},template:{value:N},tip:{value:N},type:{value:N},unique:{setter:e.DataType.Boolean.parse,value:!1},zIndex:{value:100},dropZoneNode:{valueFn:function(){return e.Node.create(St)}},labelNode:{valueFn:function(){var t=this;return e.Node.create(n.sub(Nt,{id:o.html(t.get(_)),label:o.html(t.get(P))}))}},requiredFlagNode:{valueFn:function(){return e.Node.create(xt)}},templateNode:{valueFn:"getNode"},tipFlagNode:{valueFn:function(){return e.Node.create(Tt)}}},UI_ATTRS:[u,E,k,P,t,I,z,X,V,G,tt],EXTENDS:kt,buildFieldId:function(e){return k+ot+C+ot+e},buildFieldName:function(t){return t+ ++e.Env._uidx},HTML_PARSER:{dropZoneNode:S+lt,labelNode:P,requiredFlagNode:S+vt,tipFlagNode:S+gt},prototype:{BOUNDING_TEMPLATE:Et,initializer:function(){var t=this;t.controlsToolbar=new e.Toolbar(t.get(b))},renderUI:function(){var e=this,t=e.get(p),n=e.get(y),r=e.get(H),i=e.get(W),s=e.get(Q),o=e.get(Y);n.addClass(at),n.append(r),n.append(i),n.append(o),n.append(s),e.controlsToolbar.render(t)},destructor:function(){var e=this,t=e.get(d),n=t._getFieldId(e);e.get(k).each(function(e){e.destroy()}),t.editingField===e&&(delete t.editingField,t.closeEditProperties()),e.controlsToolbar&&e.controlsToolbar.destroy(),e.get(p).dd.destroy(),e.tooltip.destroy(),e.get(j).removeField(e),t.uniqueFieldsMap.remove(n)},createField:function(e){var t=this,n=t.get(d);return e=n.createField(e),e.set(j,t),e},getHTML:function(){return N},getNode:function(){var t=this;return e.Node.create(t.getHTML())},getAttributesForCloning:function(){var e={hiddenAttributes:this.get("hiddenAttributes"),readOnlyAttributes:this.get("readOnlyAttributes"),localizationMap:this.get("localizationMap")};return s.each(this.getProperties(),function(t){var n=t.attributeName;s.indexOf(Ct,n)===-1&&(e[n]=t.value)}),e},getProperties:function(e){var t=this,r=t.getPropertyModel(),i=t.get(O),o=t.get(U),u=[];return s.each(r,function(r){var a=r.attributeName;if(e&&s.indexOf(i,a)>-1)return;var f=t.get(a),l=n.type(f);l===h&&(f=String(f)),r.value=f,s.indexOf(o,a)>-1&&(r.readOnly=!0),u.push(r)}),u},getPropertyModel:function(){var n=this,r=n.getStrings();return[{attributeName:et,editor:!1,name:r[et]},{attributeName:P,editor:new e.TextCellEditor,name:r[P]},{attributeName:V,editor:new e.RadioCellEditor({options:{"true":r[it],"false":r[B]}}),formatter:e.bind(n._booleanFormatter,n),name:r[V]},{attributeName:R,editor:new e.RadioCellEditor({options:{"true":r[it],"false":r[B]}}),formatter:e.bind(n._booleanFormatter,n),name:r[R]},{attributeName:z,editor:new e.RadioCellEditor({options:{"true":r[it],"false":r[B]}}),formatter:e.bind(n._booleanFormatter,n),name:r[z]},{attributeName:t,editor:new e.TextCellEditor({validator:{rules:{value:{required:!0}}}}),name:r[t]},{attributeName:I,editor:new e.TextCellEditor,name:r[I]},{attributeName:G,editor:new e.TextAreaCellEditor,name:r[G]}]},_booleanFormatter:function(t){var n=this,r=n.getStrings();return e.DataType.Boolean.parse(t.data.value)?r[it]:r[B]},_getToolbarItems:function(){var t=this,n=t.get(d),r=[{icon:bt,on:{click:e.bind(t._handleEditEvent,t)}}];return t.get(tt)||r.push({icon:mt,on:{click:e.bind(t._handleDuplicateEvent,t)}}),(n&&n.get(f)||!t.get(z))&&r.push({icon:yt,on:{click:e.bind(t._handleDeleteEvent,t)}}),[r]},_handleDuplicateEvent:function(e){var t=this;t.get(tt)||t.get(d).duplicateField(t),e.stopPropagation()},_handleEditEvent:function(e){var t=this;t.get(d).editField(t),e.stopPropagation()},_handleDeleteEvent:function(e){var t=this,n=t.getStrings();confirm(n[w])&&t.destroy(),e.stopPropagation()},_setId
:function(t){return e.FormBuilderField.buildFieldId(t)},_uiSetAcceptChildren:function(e){var t=this,n=t.get(p),r=t.get(T),i=n.one(S+lt);e&&!i?n.append(r):!e&&i?i.remove():e&&i&&t.set(T,i)},_uiSetSelected:function(e){var t=this;t.get(p).toggleClass(ht,e)},_uiSetDisabled:function(e){var t=this,n=t.get(Q);e?n.setAttribute(E,e):n.removeAttribute(E)},_uiSetFields:function(e){var t=this,n=t.get(d);n.plotFields(e,t.get(T))},_uiSetLabel:function(e){var t=this,n=t.get(H);n.setContent(o.html(e))},_uiSetName:function(e){var n=this,r=n.get(Q);r.set(t,e)},_uiSetPredefinedValue:function(e){var t=this,n=t.get(Q);n.val(e)},_uiSetRequired:function(e){var t=this,n=t.controlsToolbar,r=t.get(W);r.toggle(e),n.set(v,t._getToolbarItems())},_uiSetShowLabel:function(e){var t=this,n=t.get(H);n.toggle(e)},_uiSetTip:function(t){var n=this,r=n.get(Y);r.toggle(t.length!==0);if(this.tooltip){this.tooltip.set(c,t);return}this.tooltip=(new e.Tooltip({bodyContent:t,trigger:r,position:"right",visible:!1})).render()},_uiSetUnique:function(e){var t=this,n=t.get(p),r=t.controlsToolbar;n.toggleClass(pt,e),r.set(v,t._getToolbarItems())}}});e.FormBuilderField=Lt,e.FormBuilder.types.field=e.FormBuilderField},"2.0.0",{requires:["panel","aui-datatype"],skinnable:!0});
